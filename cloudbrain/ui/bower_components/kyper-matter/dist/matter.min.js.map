{"version":3,"sources":["matter.min.js","/source/matter.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","global","factory","exports","module","require","define","amd","Matter","_","jwtDecode","superagent","this","runConsoleMethod","methodName","methodData","console","apply","log","buildMessageArgs","logData","msgStr","msgObj","isObject","logLevel","has","obj","func","file","each","omit","keys","ind","list","isString","msg","decodeToken","tokenStr","tokenData","undefined","err","logger","error","description","data","Error","handleResponse","req","Promise","resolve","reject","end","res","status","warn","response","text","body","addAuthHeader","token","string","set","info","message","config","serverUrl","tokenName","tokenDataName","tokenUserDataName","msgArgs","envName","debug","domUtil","loadCss","src","document","css","createElement","rel","type","href","getElementsByTagName","insertBefore","firstChild","element","loadJs","window","js","appendChild","asyncLoadJs","setTimeout","storage","item","itemName","itemValue","setItem","localExists","JSON","stringify","sessionStorage","getItem","itemStr","isObj","itemObj","parse","removeItem","clear","get","testKey","save","delete","request","endpoint","queryData","query","post","send","put","del","clientIds","ProviderAuth","actionData","app","redirectUri","provider","value","hello","on","auth","network","api","then","r","userData","errRes","_this","loadHello","providersConfig","init","redirect_uri","_this2","initHello","login","_this3","appName","opts","name","options","signupData","account","signup","loginData","_this4","password","username","_this5","isLoggedIn","currentUser","_this6","resove","responseData","updateData","_this7","_this8","_this9","checkGroups","_this10","isArray","isInGroups","_ret","groupName","groupsArray","split","v","groups","group","userGroups","any","_this11","map","isInGroup","localServer","url","location","host","user","dom"],"mappings":"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","file":"matter.min.js","sourcesContent":[null,"(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('lodash'), require('jwt-decode'), require('superagent')) :\n\ttypeof define === 'function' && define.amd ? define(['lodash', 'jwt-decode', 'superagent'], factory) :\n\tglobal.Matter = factory(global._,global.jwtDecode,global.superagent);\n}(this, function (_,jwtDecode,superagent) { 'use strict';\n\n\t_ = 'default' in _ ? _['default'] : _;\n\tjwtDecode = 'default' in jwtDecode ? jwtDecode['default'] : jwtDecode;\n\tsuperagent = 'default' in superagent ? superagent['default'] : superagent;\n\n\tlet config = {\n\t\tserverUrl: 'http://tessellate.elasticbeanstalk.com',\n\t\ttokenName: 'tessellate',\n\t\ttokenDataName: 'tessellate-tokenData',\n\t\ttokenUserDataName: 'tessellate-currentUser'\n\t};\n\n\t//Set default log level to debug\n\tlet logLevel = 'debug';\n\t//Set log level from config\n\tif (config.logLevel) {\n\t\tlogLevel = config.logLevel;\n\t}\n\n\tlet logger = {\n\t\tlog(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t}\n\t\t},\n\t\tinfo(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t}\n\t\t},\n\t\twarn(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t}\n\t\t},\n\t\tdebug(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\t// runConsoleMethod('debug', msgArgs);\n\t\t\t\t//Do not display console debugs in production\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('debug', msgArgs);\n\t\t\t}\n\t\t},\n\t\terror(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\t//TODO: Log to external logger\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction runConsoleMethod(methodName, methodData) {\n\t\t//Safley run console methods or use console log\n\t\tif (methodName && console[methodName]) {\n\t\t\treturn console[methodName].apply(console, methodData);\n\t\t} else {\n\t\t\treturn console.log.apply(console, methodData);\n\t\t}\n\t}\n\tfunction buildMessageArgs(logData) {\n\t\tvar msgStr = '';\n\t\tvar msgObj = {};\n\t\t//TODO: Attach time stamp\n\t\t//Attach location information to the beginning of message\n\t\tif (_.isObject(logData)) {\n\t\t\tif (logLevel == 'debug') {\n\t\t\t\tif (_.has(logData, 'func')) {\n\t\t\t\t\tif (_.has(logData, 'obj')) {\n\t\t\t\t\t\t//Object and function provided\n\t\t\t\t\t\tmsgStr += `[${logData.obj}.${logData.func}()]\\n `;\n\t\t\t\t\t} else if (_.has(logData, 'file')) {\n\t\t\t\t\t\tmsgStr += `[${logData.file} > ${logData.func}()]\\n `;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmsgStr += `[${logData.func}()]\\n `;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//Print each key and its value other than obj and func\n\t\t\t_.each(_.omit(_.keys(logData)), (key, ind, list) => {\n\t\t\t\tif (key != 'func' && key != 'obj') {\n\t\t\t\t\tif (key == 'description' || key == 'message') {\n\t\t\t\t\t\tmsgStr += logData[key];\n\t\t\t\t\t} else if (_.isString(logData[key])) {\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Print objects differently\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tmsgStr += '\\n';\n\t\t} else if (_.isString(logData)) {\n\t\t\tmsgStr = logData;\n\t\t}\n\t\tvar msg = [msgStr, msgObj];\n\n\t\treturn msg;\n\t}\n\n\tlet domUtil = {\n\t\t/**\n\t\t * @description\n\t\t * Appends given css source to DOM head.\n\t\t *\n\t\t * @param {String} src - url src for css to append\n\t\t *\n\t\t */\n\t\tloadCss: (src) => {\n\t\t\tif (!document) {\n\t\t\t\tlogger.error({description: 'Document does not exsist to load assets into.', func: 'loadCss', obj: 'dom'});\n\t\t\t\tthrow new Error('Document object is required to load assets.');\n\t\t\t} else {\n\t\t\t\tlet css = document.createElement('link');\n\t\t\t\tcss.rel = 'stylesheet';\n\t\t\t\tcss.type = 'text/css';\n\t\t\t\tcss.href = src;\n\t\t\t\tdocument.getElementsByTagName('head')[0].insertBefore(css, document.getElementsByTagName('head')[0].firstChild);\n\t\t\t\tlogger.log({description: 'CSS was loaded into document.', element: css, func: 'loadCss', obj: 'dom'});\n\t\t\t\treturn css; //Return link element\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Appends given javascript source to DOM head.\n\t\t *\n\t\t * @param {String} src - url src for javascript to append\n\t\t *\n\t\t */\n\t\tloadJs: (src) => {\n\t\t\tif (window && !_.has(window, 'document')) {\n\t\t\t\tlogger.error({description: 'Document does not exsist to load assets into.', func: 'loadCss', obj: 'dom'});\n\t\t\t\tthrow new Error('Document object is required to load assets.');\n\t\t\t} else {\n\t\t\t\tlet js = window.document.createElement('script');\n\t\t\t\tjs.src = src;\n\t\t\t\tjs.type = 'text/javascript';\n\t\t\t\twindow.document.getElementsByTagName('head')[0].appendChild(js);\n\t\t\t\tlogger.log({description: 'JS was loaded into document.', element: js, func: 'loadCss', obj: 'dom'});\n\t\t\t\treturn js; //Return script element\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Appends given javascript source to DOM head.\n\t\t *\n\t\t * @param {String} src - url src for javascript to append\n\t\t *\n\t\t */\n\t\tasyncLoadJs: (src) => {\n\t\t\tif (!_.has(window, 'document')) {\n\t\t\t\tlogger.error({description: 'Document does not exsist to load assets into.', func: 'loadCss', obj: 'dom'});\n\t\t\t\tthrow new Error('Document object is required to load assets.');\n\t\t\t} else {\n\t\t\t\tlet js = window.document.createElement('script');\n\t\t\t\tjs.src = src;\n\t\t\t\tjs.type = 'text/javascript';\n\t\t\t\twindow.document.getElementsByTagName('head')[0].appendChild(js);\n\t\t\t\tlogger.log({description: 'JS was loaded into document.', element: js, func: 'loadCss', obj: 'dom'});\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\twindow.setTimeout(resolve, 30);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tlet data = {};\n\tlet storage = {\n\t\tget localExists() {\n\t\t\tconst testKey = 'test';\n\t\t\tif (typeof window != 'undefined' && typeof window.sessionStorage != 'undefined') {\n\t\t\t\ttry {\n\t\t\t\t\twindow.sessionStorage.setItem(testKey, '1');\n\t\t\t\t\twindow.sessionStorage.removeItem(testKey);\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlogger.error({description: 'Error saving to session storage', error: err,  obj: 'storage', func: 'localExists'});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage.\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t */\n\t\titem(itemName, itemValue) {\n\t\t\treturn this.setItem(itemName, itemValue);\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley sets item to session storage. Alias: item()\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t * @param {String} itemValue The items value\n\t\t *\n\t\t */\n\t\tsetItem(itemName, itemValue) {\n\t\t\tdata[itemName] = itemValue;\n\t\t\tif (this.localExists) {\n\t\t\t\t//Convert object to string\n\t\t\t\tif (_.isObject(itemValue)) {\n\t\t\t\t\titemValue = JSON.stringify(itemValue);\n\t\t\t\t}\n\t\t\t\twindow.sessionStorage.setItem(itemName, itemValue);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @description\n\t\t * Safley gets an item from session storage. Alias: item()\n\t\t *\n\t\t * @param {String} itemName The items name\n\t\t *\n\t\t * @return {String}\n\t\t *\n\t\t */\n\t\tgetItem(itemName) {\n\t\t\tif (data[itemName]) {\n\t\t\t\treturn data[itemName];\n\t\t\t} else if (this.localExists) {\n\t\t\t\tlet itemStr = window.sessionStorage.getItem(itemName);\n\t\t\t\t//Check that str is not null before parsing\n\t\t\t\tif (itemStr) {\n\t\t\t\t\tlet isObj = false;\n\t\t\t\t\tlet itemObj = null;\n\t\t\t\t\t//Try parsing to object\n\t\t\t\t\ttry {\n\t\t\t\t\t\titemObj = JSON.parse(itemStr);\n\t\t\t\t\t\tisObj = true;\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t// logger.log({message: 'String could not be parsed.', error: err, func: 'getItem', obj: 'storage'});\n\t\t\t\t\t\t//Parsing failed, this must just be a string\n\t\t\t\t\t\tisObj = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (isObj) {\n\t\t\t\t\t\treturn itemObj;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn itemStr;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName - The items name\n\t\t *\n\t\t */\n\t\tremoveItem(itemName) {\n\t\t\t//TODO: Only remove used items\n\t\t\tif (data[itemName]) {\n\t\t\t\tdata[itemName] = null;\n\t\t\t}\n\t\t\tif (this.localExists) {\n\t\t\t\ttry {\n\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.removeItem(itemName);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlogger.error({description: 'Error removing item from session storage', error: err,  obj: 'storage', func: 'removeItem'});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * @description\n\t\t * Safley removes item from session storage.\n\t\t *\n\t\t * @param {String} itemName the items name\n\t\t * @param {String} itemValue the items value\n\t\t *\n\t\t */\n\t\tclear() {\n\t\t\t//TODO: Only remove used items\n\t\t\tdata = {};\n\t\t\tif (this.localExists) {\n\t\t\t\ttry {\n\t\t\t\t\t\t//Clear session storage\n\t\t\t\t\twindow.sessionStorage.clear();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlogger.warn('Session storage could not be cleared.', err);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t};\n\n\tfunction decodeToken(tokenStr) {\n\t\tlet tokenData;\n\t\tif (tokenStr && tokenStr != '') {\n\t\t\ttry {\n\t\t\t\ttokenData = jwtDecode(tokenStr);\n\t\t\t} catch (err) {\n\t\t\t\tlogger.error({description: 'Error decoding token.', data: tokenData, error: err, func: 'decodeToken', file: 'token'});\n\t\t\t\tthrow new Error('Invalid token string.');\n\t\t\t}\n\t\t}\n\t\treturn tokenData;\n\t}\n\tlet token = {\n\t\tget string() {\n\t\t\treturn storage.getItem(config.tokenName);\n\t\t},\n\t\tget data() {\n\t\t\tif (storage.getItem(config.tokenDataName)) {\n\t\t\t\treturn storage.getItem(config.tokenDataName);\n\t\t\t} else {\n\t\t\t\treturn decodeToken(this.string);\n\t\t\t}\n\t\t},\n\t\tset data(tokenData) {\n\t\t\tif (_.isString(tokenData)) {\n\t\t\t\tlet tokenStr = tokenData;\n\t\t\t\ttokenData = decodeToken(tokenStr);\n\t\t\t\tlogger.info({description: 'Token data was set as string. Decoding token.', token: tokenStr, tokenData: tokenData, func: 'data', obj: 'token'});\n\t\t\t} else {\n\t\t\t\tlogger.log({description: 'Token data was set.', data: tokenData, func: 'data', obj: 'token'});\n\t\t\t\tstorage.setItem(config.tokenDataName, tokenData);\n\t\t\t}\n\t\t},\n\t\tset string(tokenData) {\n\t\t\tlet tokenStr;\n\t\t\t//Handle object being passed\n\t\t\tif (!_.isString(tokenData)) {\n\t\t\t\t//Token is included in object\n\t\t\t\tlogger.log({description: 'Token data is not string.', token: tokenData, func: 'string', obj: 'token'});\n\n\t\t\t\tif (_.isObject(tokenData) && _.has(tokenData, 'token')) {\n\t\t\t\t\ttokenStr = tokenData.token;\n\t\t\t\t} else {\n\t\t\t\t\t//Input is either not an string or object that contains nessesary info\n\t\t\t\t\tlogger.error({description: 'Invalid value set to token.', token: tokenData, func: 'string', obj: 'token'});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttokenStr = tokenData;\n\t\t\t}\n\t\t\tlogger.log({description: 'Token was set.', token: tokenData, tokenStr: tokenStr, func: 'string', obj: 'token'});\n\t\t\tstorage.setItem(config.tokenName, tokenStr);\n\t\t\tthis.data = jwtDecode(tokenStr);\n\t\t},\n\t\tsave(tokenStr) {\n\t\t\tthis.string = tokenStr;\n\t\t},\n\t\tdelete() {\n\t\t\t//Remove string token\n\t\t\tstorage.removeItem(config.tokenName);\n\t\t\t//Remove user data\n\t\t\tstorage.removeItem(config.tokenDataName);\n\t\t\tlogger.log({description: 'Token was removed.', func: 'delete', obj: 'token'});\n\t\t}\n\t};\n\n\tlet request = {\n\t\tget(endpoint, queryData) {\n\t\t\tvar req = superagent.get(endpoint);\n\t\t\tif (queryData) {\n\t\t\t\treq.query(queryData);\n\t\t\t}\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tpost(endpoint, data) {\n\t\t\tvar req = superagent.post(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tput(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t},\n\t\tdel(endpoint, data) {\n\t\t\tvar req = superagent.put(endpoint).send(data);\n\t\t\treq = addAuthHeader(req);\n\t\t\treturn handleResponse(req);\n\t\t}\n\t};\n\n\tfunction handleResponse(req) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treq.end((err, res) => {\n\t\t\t\tif (!err) {\n\t\t\t\t\t// logger.log({description: 'Response:', response:res, func:'handleResponse', file: 'request'});\n\t\t\t\t\treturn resolve(res.body);\n\t\t\t\t} else {\n\t\t\t\t\tif (err.status == 401) {\n\t\t\t\t\t\tlogger.warn({description: 'Unauthorized. You must be signed into make this request.', func: 'handleResponse'});\n\t\t\t\t\t}\n\t\t\t\t\tif (err && err.response) {\n\t\t\t\t\t\treturn reject(err.response.text);\n\t\t\t\t\t}\n\t\t\t\t\tlogger.warn({description: 'Unauthorized. You must be signed into make this request.', error: err, func: 'handleResponse'});\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\tfunction addAuthHeader(req) {\n\t\tif (token.string) {\n\t\t\treq = req.set('Authorization', 'Bearer ' + token.string);\n\t\t\tconsole.info({message: 'Set auth header', func: 'addAuthHeader', file: 'request'});\n\t\t}\n\t\treturn req;\n\t}\n\n\t// import hello from 'hellojs'; //Modifies objects to have id parameter?\n\n\t// import hello from 'hellojs'; //After es version of module is created\n\t//Private object containing clientIds\n\tlet clientIds = {};\n\n\tclass ProviderAuth {\n\t\tconstructor(actionData) {\n\t\t\tthis.app = actionData.app ? actionData.app : null;\n\t\t\tthis.redirectUri = actionData.redirectUri ? actionData.redirectUri : 'redirect.html';\n\t\t\tthis.provider = actionData.provider ? actionData.provider : null;\n\t\t}\n\t\tloadHello() {\n\t\t\t//Load hellojs script\n\t\t\t//TODO: Replace this with es6ified version\n\t\t\tif (window && !window.hello) {\n\t\t\t\treturn domUtil.asyncLoadJs('https://s3.amazonaws.com/kyper-cdn/js/hello.js');\n\t\t\t} else {\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\t\t}\n\t\thelloLoginListener() {\n\t\t\t//Login Listener\n\t\t\twindow.hello.on('auth.login', (auth) => {\n\t\t\t\tlogger.info({description: 'User logged in to google.', func: 'loadHello', obj: 'Google'});\n\t\t\t\t// Call user information, for the given network\n\t\t\t\twindow.hello(auth.network).api('/me').then(function(r) {\n\t\t\t\t\t// Inject it into the container\n\t\t\t\t\t//TODO:Send account informaiton to server\n\t\t\t\t\tvar userData = r;\n\t\t\t\t\tuserData.provider = auth.network;\n\t\t\t\t\t//Login or Signup endpoint\n\t\t\t\t\treturn request.post(this.endpoint + '/provider', userData)\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tlogger.log({description: 'Provider request successful.',  response: response, func: 'signup', obj: 'GoogleUtil'});\n\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t['catch']((errRes) => {\n\t\t\t\t\t\t\tlogger.error({description: 'Error requesting login.', error: errRes, func: 'signup', obj: 'Matter'});\n\t\t\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tinitHello() {\n\t\t\treturn this.loadHello().then(() => {\n\t\t\t\treturn request.get(`${this.app.endpoint}/providers`)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tlogger.log({description: 'Provider request successful.',  response: response, func: 'signup', obj: 'ProviderAuth'});\n\t\t\t\t\tlet provider = response[this.provider];\n\t\t\t\t\tlogger.warn({description: 'Provider found', provider: provider , func: 'login', obj: 'ProviderAuth'});\n\t\t\t\t\tif (!provider) {\n\t\t\t\t\t\tlogger.error({description: 'Provider is not setup. Visit tessellate.kyper.io to enter your client id for ' + this.provider, provider: this.provider, clientIds: clientIds, func: 'login', obj: 'ProviderAuth'});\n\t\t\t\t\t\treturn Promise.reject({message: 'Provider is not setup.'});\n\t\t\t\t\t}\n\t\t\t\t\tlogger.warn({description: 'Providers config built', providersConfig: response, func: 'login', obj: 'ProviderAuth'});\n\t\t\t\t\treturn window.hello.init(response, {redirect_uri: 'redirect.html'});\n\t\t\t\t})\n\t\t\t\t['catch']((errRes) => {\n\t\t\t\t\tlogger.error({description: 'Getting application data.', error: errRes, func: 'signup', obj: 'Matter'});\n\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tlogin() {\n\t\t\t//Initalize Hello\n\t\t\treturn this.initHello().then(() => {\n\t\t\t\treturn window.hello.login(this.provider);\n\t\t\t});\n\t\t}\n\t\tsignup() {\n\t\t\t//Initalize Hello\n\t\t\t// if (!_.has(clientIds, this.provider)) {\n\t\t\t// \tlogger.error({description: `${this.provider} is not setup as a provider on Tessellate. Please visit tessellate.kyper.io to enter your provider information.`, provider: this.provider, clientIds: clientIds, func: 'login', obj: 'ProviderAuth'});\n\t\t\t// \treturn Promise.reject();\n\t\t\t// }\n\t\t\t//TODO: send info to server\n\t\t\treturn this.initHello().then(() => {\n\t\t\t\treturn window.hello.login(this.provider);\n\t\t\t}, (errRes) => {\n\t\t\t\tlogger.error({description: 'Error signing up.', error: errRes, func: 'signup', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Error signing up.'});\n\t\t\t});\n\t\t}\n\t}\n\n\tclass Matter {\n\t\t/* Constructor\n\t\t * @param {string} appName Name of application\n\t\t */\n\t\tconstructor(appName, opts) {\n\t\t\tif (!appName) {\n\t\t\t\tlogger.error({description: 'Application name requires to use Matter.', func: 'constructor', obj: 'Matter'});\n\t\t\t\tthrow new Error('Application name is required to use Matter');\n\t\t\t} else {\n\t\t\t\tthis.name = appName;\n\t\t\t}\n\t\t\tif (opts) {\n\t\t\t\tthis.options = opts;\n\t\t\t}\n\t\t}\n\t\t/* Endpoint getter\n\t\t *\n\t\t */\n\t\tget endpoint() {\n\t\t\tlet serverUrl = config.serverUrl;\n\t\t\tif (_.has(this, 'options') && this.options.localServer) {\n\t\t\t\tserverUrl = 'http://localhost:4000';\n\t\t\t\tlogger.info({description: 'LocalServer option was set to true. Now server url is local server.', url: serverUrl, func: 'endpoint', obj: 'Matter'});\n\t\t\t}\n\t\t\tif (this.name == 'tessellate') {\n\t\t\t\t//Remove url if host is server\n\t\t\t\tif (typeof window !== 'undefined' && _.has(window, 'location') && window.location.host === serverUrl) {\n\t\t\t\t\tserverUrl = '';\n\t\t\t\t\tlogger.info({description: 'Host is Server, serverUrl simplified!', url: serverUrl, func: 'endpoint', obj: 'Matter'});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tserverUrl = serverUrl + '/apps/' + this.name;\n\t\t\t\tlogger.log({description: 'Server url set.', url: serverUrl, func: 'endpoint', obj: 'Matter'});\n\t\t\t}\n\t\t\treturn serverUrl;\n\t\t}\n\t\t/* Signup\n\t\t *\n\t\t */\n\t\tsignup(signupData) {\n\t\t\tlogger.log({description: 'Signup called.', signupData: signupData, func: 'signup', obj: 'Matter'});\n\t\t\tif (!signupData) {\n\t\t\t\tlogger.error({description: 'Signup information is required to signup.', func: 'signup', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Login data is required to login.'});\n\t\t\t}\n\t\t\tif (_.isObject(signupData)) {\n\t\t\t\treturn request.post(this.endpoint + '/signup', signupData)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tlogger.log({description: 'Account request successful.', signupData: signupData, response: response, func: 'signup', obj: 'Matter'});\n\t\t\t\t\tif (_.has(response, 'account')) {\n\t\t\t\t\t\treturn response.account;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlogger.warn({description: 'Account was not contained in signup response.', signupData: signupData, response: response, func: 'signup', obj: 'Matter'});\n\t\t\t\t\t\treturn response;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t['catch']((errRes) => {\n\t\t\t\t\tlogger.error({description: 'Error requesting signup.', signupData: signupData, error: errRes, func: 'signup', obj: 'Matter'});\n\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t});\n\t\t\t} else if (_.isString(signupData)) {\n\t\t\t\t//Handle 3rd Party signups\n\t\t\t\tlet auth = new ProviderAuth({provider: signupData, app: this});\n\t\t\t\treturn auth.signup(signupData).then((res) => {\n\t\t\t\t\tlogger.info({description: 'Provider signup successful.', provider: signupData, res: res, func: 'signup', obj: 'Matter'});\n\t\t\t\t\treturn Promise.resolve(res);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlogger.error({description: 'Incorrectly formatted signup information.', signupData: signupData, func: 'signup', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Signup requires an object or a string.'});\n\t\t\t}\n\t\t}\n\t\t/** Login\n\t\t *\n\t\t */\n\t\tlogin(loginData) {\n\t\t\tif (!loginData) {\n\t\t\t\tlogger.error({description: 'Username/Email and Password are required to login', func: 'login', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Login data is required to login.'});\n\t\t\t}\n\t\t\tif (_.isObject(loginData)) {\n\t\t\t\tif (!loginData.password || !loginData.username) {\n\t\t\t\t\treturn Promise.reject({message: 'Username/Email and Password are required to login'});\n\t\t\t\t}\n\t\t\t\t//Username/Email Login\n\t\t\t\treturn request.put(this.endpoint + '/login', loginData)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (_.has(response, 'data') && _.has(response.data, 'status') && response.data.status == 409) {\n\t\t\t\t\t\tlogger.warn({description: 'Account not found.', response: response, func: 'login', obj: 'Matter'});\n\t\t\t\t\t\treturn Promise.reject(response.data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlogger.log({description: 'Successful login.', response: response, func: 'login', obj: 'Matter'});\n\t\t\t\t\t\tif (_.has(response, 'token')) {\n\t\t\t\t\t\t\tthis.token.string = response.token;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (_.has(response, 'account')) {\n\t\t\t\t\t\t\tthis.storage.setItem(config.tokenUserDataName, response.account);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn response.account;\n\t\t\t\t\t}\n\t\t\t\t})['catch']((errRes) => {\n\t\t\t\t\tlogger.error({description: 'Error requesting login.', error: errRes, status: errRes.status,  func: 'login', obj: 'Matter'});\n\t\t\t\t\tif (errRes.status == 409 || errRes.status == 400) {\n\t\t\t\t\t\terrRes = errRes.response.text;\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t});\n\t\t\t} else if (_.isString(loginData)) {\n\t\t\t\t//Provider login\n\t\t\t\tlet auth = new ProviderAuth({provider: loginData, app: this});\n\t\t\t\treturn auth.login().then((res) => {\n\t\t\t\t\tlogger.info({description: 'Provider login successful.', provider: loginData, res: res, func: 'login', obj: 'Matter'});\n\t\t\t\t\treturn Promise.resolve(res);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlogger.error({description: 'Incorrectly fomatted login information.', signupData: signupData, func: 'login', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Login requires an object or a string.'});\n\t\t\t}\n\t\t}\n\t\t/** Logout\n\t\t */\n\t\tlogout() {\n\t\t\t//TODO: Handle logging out of providers\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.warn({description: 'No logged in account to log out.', func: 'logout', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'No logged in account to log out.'});\n\t\t\t}\n\t\t\treturn request.put(this.endpoint + '/logout').then((response) => {\n\t\t\t\tlogger.log({description: 'Logout successful.', response: response, func: 'logout', obj: 'Matter'});\n\t\t\t\tthis.currentUser = null;\n\t\t\t\tthis.token.delete();\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error requesting log out: ', error: errRes, func: 'logout', obj: 'Matter'});\n\t\t\t\tthis.storage.removeItem(config.tokenUserDataName);\n\t\t\t\tthis.token.delete();\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\tgetCurrentUser() {\n\t\t\tif (this.storage.item(config.tokenUserDataName)) {\n\t\t\t\treturn Promise.resove(this.storage.getItem(config.tokenUserDataName));\n\t\t\t} else {\n\t\t\t\tif (this.isLoggedIn) {\n\t\t\t\t\treturn request.get(this.endpoint + '/user').then((response) => {\n\t\t\t\t\t\t//TODO: Save user information locally\n\t\t\t\t\t\tlogger.log({description: 'Current User Request responded.', responseData: response, func: 'currentUser', obj: 'Matter'});\n\t\t\t\t\t\tthis.currentUser = response;\n\t\t\t\t\t\treturn response;\n\t\t\t\t\t})['catch']((errRes) => {\n\t\t\t\t\t\tif (errRes.status == 401) {\n\t\t\t\t\t\t\tlogger.warn({description: 'Called for current user without token.', error: errRes, func: 'currentUser', obj: 'Matter'});\n\t\t\t\t\t\t\ttoken.delete();\n\t\t\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlogger.error({description: 'Error requesting current user.', error: errRes, func: 'currentUser', obj: 'Matter'});\n\t\t\t\t\t\t\treturn Promise.reject(errRes);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn Promise.resolve(null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/** updateProfile\n\t\t */\n\t\tupdateProfile(updateData) {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.error({description: 'No current user profile to update.', func: 'updateProfile', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Must be logged in to update profile.'});\n\t\t\t}\n\t\t\t//Send update request\n\t\t\tlogger.warn({description: 'Calling update endpoint.', endpoint: `${this.endpoint}/user/${this.token.data.username}` , func: 'updateProfile', obj: 'Matter'});\n\t\t\treturn request.put(`${this.endpoint}/user/${this.token.data.username}` , updateData).then((response) => {\n\t\t\t\tlogger.log({description: 'Update profile request responded.', responseData: response, func: 'updateProfile', obj: 'Matter'});\n\t\t\t\tthis.currentUser = response;\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error requesting current user.', error: errRes, func: 'updateProfile', obj: 'Matter'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\tchangePassword() {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.error({description: 'No current user profile for which to change password.', func: 'changePassword', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Must be logged in to change password.'});\n\t\t\t}\n\t\t\t//Send update request\n\t\t\tlogger.log({description: 'Calling update endpoint to change password.', endpoint: `${this.endpoint}/user/${this.token.data.username}` , func: 'changePassword', obj: 'Matter'});\n\t\t\treturn request.put(`${this.endpoint}/user/${this.token.data.username}` , updateData).then((response) => {\n\t\t\t\tlogger.log({description: 'Update password request responded.', responseData: response, func: 'changePassword', obj: 'Matter'});\n\t\t\t\tthis.currentUser = response;\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error requesting password change.', error: errRes, func: 'changePassword', obj: 'Matter'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\t\trecoverPassword() {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.error({description: 'No current user for which to recover password.', func: 'recoverPassword', obj: 'Matter'});\n\t\t\t\treturn Promise.reject({message: 'Must be logged in to recover password.'});\n\t\t\t}\n\t\t\t//Send update request\n\t\t\tlogger.log({description: 'Calling recover password endpoint.', endpoint: `${this.endpoint}/user/${this.token.data.username}` , func: 'recoverPassword', obj: 'Matter'});\n\t\t\treturn request.put(`${this.endpoint}/account/${this.token.data.username}/recover` , updateData).then((response) => {\n\t\t\t\tlogger.log({description: 'Recover password request responded.', responseData: response, func: 'recoverPassword', obj: 'Matter'});\n\t\t\t\tthis.currentUser = response;\n\t\t\t\treturn response;\n\t\t\t})['catch']((errRes) => {\n\t\t\t\tlogger.error({description: 'Error requesting password recovery.', error: errRes, func: 'recoverPassword', obj: 'Matter'});\n\t\t\t\treturn Promise.reject(errRes);\n\t\t\t});\n\t\t}\n\n\t\t/* set currentUser\n\t\t * @description Sets currently user data\n\t\t */\n\t\tset currentUser(userData) {\n\t\t\tlogger.log({description: 'Current User set.', user: userData, func: 'currentUser', obj: 'Matter'});\n\t\t\tthis.storage.setItem(config.tokenUserDataName, userData);\n\t\t}\n\t\t/* get currentUser\n\t\t * @description Gets currently logged in user or returns null\n\t\t */\n\t\tget currentUser() {\n\t\t\tif (this.storage.getItem(config.tokenUserDataName)) {\n\t\t\t\treturn this.storage.getItem(config.tokenUserDataName);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t/* Storage\n\t\t *\n\t\t */\n\t\tget storage() {\n\t\t\treturn storage;\n\t\t}\n\t\t/** Token\n\t\t */\n\t\tget token() {\n\t\t\treturn token;\n\t\t}\n\t\tget utils() {\n\t\t\treturn {logger: logger, request: request, storage: storage, dom: domUtil};\n\t\t}\n\t\tget isLoggedIn() {\n\t\t\treturn this.token.string ? true : false;\n\t\t}\n\t\t//Check that user is in a single group or in all of a list of groups\n\t\tisInGroup(checkGroups) {\n\t\t\tif (!this.isLoggedIn) {\n\t\t\t\tlogger.log({description: 'No logged in user to check.', func: 'isInGroup', obj: 'Matter'});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//Check if user is\n\t\t\tif (checkGroups && _.isString(checkGroups)) {\n\t\t\t\tlet groupName = checkGroups;\n\t\t\t\t//Single role or string list of roles\n\t\t\t\tlet groupsArray = groupName.split(',');\n\t\t\t\tif (groupsArray.length > 1) {\n\t\t\t\t\t//String list of groupts\n\t\t\t\t\tlogger.info({description: 'String list of groups.', list: groupsArray, func: 'isInGroup', obj: 'Matter'});\n\t\t\t\t\treturn this.isInGroups(groupsArray);\n\t\t\t\t} else {\n\t\t\t\t\t//Single group\n\t\t\t\t\tlet groups = this.token.data.groups || [];\n\t\t\t\t\tlogger.log({description: 'Checking if user is in group.', group: groupName, userGroups: this.token.data.groups || [],  func: 'isInGroup', obj: 'Matter'});\n\t\t\t\t\treturn _.any(groups, (group) =>  {\n\t\t\t\t\t\treturn groupName == group.name;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (checkGroups && _.isArray(checkGroups)) {\n\t\t\t\t//Array of roles\n\t\t\t\t//Check that user is in every group\n\t\t\t\tlogger.info({description: 'Array of groups.', list: checkGroups, func: 'isInGroup', obj: 'Matter'});\n\t\t\t\treturn this.isInGroups(checkGroups);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//TODO: Handle string and array inputs\n\t\t}\n\t\tisInGroups(checkGroups) {\n\t\t\t//Check if user is in any of the provided groups\n\t\t\tif (checkGroups && _.isArray(checkGroups)) {\n\t\t\t\treturn _.map(checkGroups, (group) =>  {\n\t\t\t\t\tif (_.isString(group)) {\n\t\t\t\t\t\t//Group is string\n\t\t\t\t\t\treturn this.isInGroup(group);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Group is object\n\t\t\t\t\t\treturn this.isInGroup(group.name);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (checkGroups && _.isString(checkGroups)) {\n\t\t\t\t//TODO: Handle spaces within string list\n\t\t\t\tlet groupsArray = checkGroups.split(',');\n\t\t\t\tif (groupsArray.length > 1) {\n\t\t\t\t\treturn this.isInGroups(groupsArray);\n\t\t\t\t}\n\t\t\t\treturn this.isInGroup(groupsArray[0]);\n\t\t\t} else {\n\t\t\t\tlogger.error({description: 'Invalid groups list.', func: 'isInGroups', obj: 'Matter'});\n\t\t\t}\n\t\t}\n\t};\n\n\treturn Matter;\n\n}));"],"sourceRoot":"/source/"}